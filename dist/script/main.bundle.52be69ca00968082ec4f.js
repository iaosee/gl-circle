/*!
 *  author: @iaosee 
 *  email: iaosee@outlook.com
 *  url: www.iaosee.com
 */!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s="./src/index.ts")}({"./src/index.ts":function(t,r,e){"use strict";e.r(r);var n={};e.r(n),e.d(n,"create",function(){return i}),e.d(n,"clone",function(){return u}),e.d(n,"copy",function(){return s}),e.d(n,"fromValues",function(){return c}),e.d(n,"set",function(){return f}),e.d(n,"identity",function(){return h}),e.d(n,"transpose",function(){return l}),e.d(n,"invert",function(){return d}),e.d(n,"adjoint",function(){return m}),e.d(n,"determinant",function(){return M}),e.d(n,"multiply",function(){return b}),e.d(n,"mul",function(){return b}),e.d(n,"translate",function(){return p}),e.d(n,"scale",function(){return v}),e.d(n,"rotate",function(){return g}),e.d(n,"rotateX",function(){return A}),e.d(n,"rotateY",function(){return y}),e.d(n,"rotateZ",function(){return R}),e.d(n,"fromTranslation",function(){return S}),e.d(n,"fromScaling",function(){return x}),e.d(n,"fromRotation",function(){return w}),e.d(n,"fromXRotation",function(){return F}),e.d(n,"fromYRotation",function(){return _}),e.d(n,"fromZRotation",function(){return P}),e.d(n,"fromRotationTranslation",function(){return B}),e.d(n,"getTranslation",function(){return E}),e.d(n,"getScaling",function(){return L}),e.d(n,"getRotation",function(){return I}),e.d(n,"fromRotationTranslationScale",function(){return T}),e.d(n,"fromRotationTranslationScaleOrigin",function(){return D}),e.d(n,"fromQuat",function(){return V}),e.d(n,"frustum",function(){return k}),e.d(n,"perspective",function(){return U}),e.d(n,"perspectiveFromFieldOfView",function(){return q}),e.d(n,"ortho",function(){return Y}),e.d(n,"lookAt",function(){return C}),e.d(n,"str",function(){return z}),e.d(n,"frob",function(){return O}),e.d(n,"add",function(){return N}),e.d(n,"subtract",function(){return H}),e.d(n,"sub",function(){return H}),e.d(n,"multiplyScalar",function(){return X}),e.d(n,"multiplyScalarAndAdd",function(){return W}),e.d(n,"exactEquals",function(){return j}),e.d(n,"equals",function(){return G});var a={};e.r(a),e.d(a,"create",function(){return Z}),e.d(a,"clone",function(){return K}),e.d(a,"fromValues",function(){return Q}),e.d(a,"copy",function(){return J}),e.d(a,"set",function(){return $}),e.d(a,"add",function(){return tt}),e.d(a,"subtract",function(){return rt}),e.d(a,"sub",function(){return rt}),e.d(a,"multiply",function(){return et}),e.d(a,"mul",function(){return et}),e.d(a,"divide",function(){return nt}),e.d(a,"div",function(){return nt}),e.d(a,"ceil",function(){return at}),e.d(a,"floor",function(){return ot}),e.d(a,"min",function(){return it}),e.d(a,"max",function(){return ut}),e.d(a,"round",function(){return st}),e.d(a,"scale",function(){return ct}),e.d(a,"scaleAndAdd",function(){return ft}),e.d(a,"distance",function(){return ht}),e.d(a,"dist",function(){return ht}),e.d(a,"squaredDistance",function(){return lt}),e.d(a,"sqrDist",function(){return lt}),e.d(a,"length",function(){return dt}),e.d(a,"len",function(){return dt}),e.d(a,"squaredLength",function(){return mt}),e.d(a,"sqrLen",function(){return mt}),e.d(a,"negate",function(){return Mt}),e.d(a,"inverse",function(){return bt}),e.d(a,"normalize",function(){return pt}),e.d(a,"dot",function(){return vt}),e.d(a,"cross",function(){return gt}),e.d(a,"lerp",function(){return At}),e.d(a,"hermite",function(){return yt}),e.d(a,"bezier",function(){return Rt}),e.d(a,"random",function(){return St}),e.d(a,"transformMat4",function(){return xt}),e.d(a,"transformMat3",function(){return wt}),e.d(a,"transformQuat",function(){return Ft}),e.d(a,"rotateX",function(){return _t}),e.d(a,"rotateY",function(){return Pt}),e.d(a,"rotateZ",function(){return Bt}),e.d(a,"forEach",function(){return Et}),e.d(a,"angle",function(){return Lt}),e.d(a,"str",function(){return It}),e.d(a,"exactEquals",function(){return Tt}),e.d(a,"equals",function(){return Dt});var o=1e-6;Math.PI;function i(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function u(t){var r=new Float32Array(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function s(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function c(t,r,e,n,a,o,i,u,s,c,f,h,l,d,m,M){var b=new Float32Array(16);return b[0]=t,b[1]=r,b[2]=e,b[3]=n,b[4]=a,b[5]=o,b[6]=i,b[7]=u,b[8]=s,b[9]=c,b[10]=f,b[11]=h,b[12]=l,b[13]=d,b[14]=m,b[15]=M,b}function f(t,r,e,n,a,o,i,u,s,c,f,h,l,d,m,M,b){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=m,t[14]=M,t[15]=b,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t,r){if(t===r){var e=r[1],n=r[2],a=r[3],o=r[6],i=r[7],u=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=o,t[11]=r[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function d(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],f=r[8],h=r[9],l=r[10],d=r[11],m=r[12],M=r[13],b=r[14],p=r[15],v=e*u-n*i,g=e*s-a*i,A=e*c-o*i,y=n*s-a*u,R=n*c-o*u,S=a*c-o*s,x=f*M-h*m,w=f*b-l*m,F=f*p-d*m,_=h*b-l*M,P=h*p-d*M,B=l*p-d*b,E=v*B-g*P+A*_+y*F-R*w+S*x;return E?(E=1/E,t[0]=(u*B-s*P+c*_)*E,t[1]=(a*P-n*B-o*_)*E,t[2]=(M*S-b*R+p*y)*E,t[3]=(l*R-h*S-d*y)*E,t[4]=(s*F-i*B-c*w)*E,t[5]=(e*B-a*F+o*w)*E,t[6]=(b*A-m*S-p*g)*E,t[7]=(f*S-l*A+d*g)*E,t[8]=(i*P-u*F+c*x)*E,t[9]=(n*F-e*P-o*x)*E,t[10]=(m*R-M*A+p*v)*E,t[11]=(h*A-f*R-d*v)*E,t[12]=(u*w-i*_-s*x)*E,t[13]=(e*_-n*w+a*x)*E,t[14]=(M*g-m*y-b*v)*E,t[15]=(f*y-h*g+l*v)*E,t):null}function m(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],f=r[8],h=r[9],l=r[10],d=r[11],m=r[12],M=r[13],b=r[14],p=r[15];return t[0]=u*(l*p-d*b)-h*(s*p-c*b)+M*(s*d-c*l),t[1]=-(n*(l*p-d*b)-h*(a*p-o*b)+M*(a*d-o*l)),t[2]=n*(s*p-c*b)-u*(a*p-o*b)+M*(a*c-o*s),t[3]=-(n*(s*d-c*l)-u*(a*d-o*l)+h*(a*c-o*s)),t[4]=-(i*(l*p-d*b)-f*(s*p-c*b)+m*(s*d-c*l)),t[5]=e*(l*p-d*b)-f*(a*p-o*b)+m*(a*d-o*l),t[6]=-(e*(s*p-c*b)-i*(a*p-o*b)+m*(a*c-o*s)),t[7]=e*(s*d-c*l)-i*(a*d-o*l)+f*(a*c-o*s),t[8]=i*(h*p-d*M)-f*(u*p-c*M)+m*(u*d-c*h),t[9]=-(e*(h*p-d*M)-f*(n*p-o*M)+m*(n*d-o*h)),t[10]=e*(u*p-c*M)-i*(n*p-o*M)+m*(n*c-o*u),t[11]=-(e*(u*d-c*h)-i*(n*d-o*h)+f*(n*c-o*u)),t[12]=-(i*(h*b-l*M)-f*(u*b-s*M)+m*(u*l-s*h)),t[13]=e*(h*b-l*M)-f*(n*b-a*M)+m*(n*l-a*h),t[14]=-(e*(u*b-s*M)-i*(n*b-a*M)+m*(n*s-a*u)),t[15]=e*(u*l-s*h)-i*(n*l-a*h)+f*(n*s-a*u),t}function M(t){var r=t[0],e=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],m=t[13],M=t[14],b=t[15];return(r*i-e*o)*(h*b-l*M)-(r*u-n*o)*(f*b-l*m)+(r*s-a*o)*(f*M-h*m)+(e*u-n*i)*(c*b-l*d)-(e*s-a*i)*(c*M-h*d)+(n*s-a*u)*(c*m-f*d)}function b(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=r[6],f=r[7],h=r[8],l=r[9],d=r[10],m=r[11],M=r[12],b=r[13],p=r[14],v=r[15],g=e[0],A=e[1],y=e[2],R=e[3];return t[0]=g*n+A*u+y*h+R*M,t[1]=g*a+A*s+y*l+R*b,t[2]=g*o+A*c+y*d+R*p,t[3]=g*i+A*f+y*m+R*v,g=e[4],A=e[5],y=e[6],R=e[7],t[4]=g*n+A*u+y*h+R*M,t[5]=g*a+A*s+y*l+R*b,t[6]=g*o+A*c+y*d+R*p,t[7]=g*i+A*f+y*m+R*v,g=e[8],A=e[9],y=e[10],R=e[11],t[8]=g*n+A*u+y*h+R*M,t[9]=g*a+A*s+y*l+R*b,t[10]=g*o+A*c+y*d+R*p,t[11]=g*i+A*f+y*m+R*v,g=e[12],A=e[13],y=e[14],R=e[15],t[12]=g*n+A*u+y*h+R*M,t[13]=g*a+A*s+y*l+R*b,t[14]=g*o+A*c+y*d+R*p,t[15]=g*i+A*f+y*m+R*v,t}function p(t,r,e){var n,a,o,i,u,s,c,f,h,l,d,m,M=e[0],b=e[1],p=e[2];return r===t?(t[12]=r[0]*M+r[4]*b+r[8]*p+r[12],t[13]=r[1]*M+r[5]*b+r[9]*p+r[13],t[14]=r[2]*M+r[6]*b+r[10]*p+r[14],t[15]=r[3]*M+r[7]*b+r[11]*p+r[15]):(n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=r[6],f=r[7],h=r[8],l=r[9],d=r[10],m=r[11],t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=m,t[12]=n*M+u*b+h*p+r[12],t[13]=a*M+s*b+l*p+r[13],t[14]=o*M+c*b+d*p+r[14],t[15]=i*M+f*b+m*p+r[15]),t}function v(t,r,e){var n=e[0],a=e[1],o=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=r[11]*o,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function g(t,r,e,n){var a,i,u,s,c,f,h,l,d,m,M,b,p,v,g,A,y,R,S,x,w,F,_,P,B=n[0],E=n[1],L=n[2],I=Math.sqrt(B*B+E*E+L*L);return Math.abs(I)<o?null:(B*=I=1/I,E*=I,L*=I,a=Math.sin(e),u=1-(i=Math.cos(e)),s=r[0],c=r[1],f=r[2],h=r[3],l=r[4],d=r[5],m=r[6],M=r[7],b=r[8],p=r[9],v=r[10],g=r[11],A=B*B*u+i,y=E*B*u+L*a,R=L*B*u-E*a,S=B*E*u-L*a,x=E*E*u+i,w=L*E*u+B*a,F=B*L*u+E*a,_=E*L*u-B*a,P=L*L*u+i,t[0]=s*A+l*y+b*R,t[1]=c*A+d*y+p*R,t[2]=f*A+m*y+v*R,t[3]=h*A+M*y+g*R,t[4]=s*S+l*x+b*w,t[5]=c*S+d*x+p*w,t[6]=f*S+m*x+v*w,t[7]=h*S+M*x+g*w,t[8]=s*F+l*_+b*P,t[9]=c*F+d*_+p*P,t[10]=f*F+m*_+v*P,t[11]=h*F+M*_+g*P,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function A(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[4],i=r[5],u=r[6],s=r[7],c=r[8],f=r[9],h=r[10],l=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=o*a+c*n,t[5]=i*a+f*n,t[6]=u*a+h*n,t[7]=s*a+l*n,t[8]=c*a-o*n,t[9]=f*a-i*n,t[10]=h*a-u*n,t[11]=l*a-s*n,t}function y(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[0],i=r[1],u=r[2],s=r[3],c=r[8],f=r[9],h=r[10],l=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a-c*n,t[1]=i*a-f*n,t[2]=u*a-h*n,t[3]=s*a-l*n,t[8]=o*n+c*a,t[9]=i*n+f*a,t[10]=u*n+h*a,t[11]=s*n+l*a,t}function R(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[0],i=r[1],u=r[2],s=r[3],c=r[4],f=r[5],h=r[6],l=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a+c*n,t[1]=i*a+f*n,t[2]=u*a+h*n,t[3]=s*a+l*n,t[4]=c*a-o*n,t[5]=f*a-i*n,t[6]=h*a-u*n,t[7]=l*a-s*n,t}function S(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function x(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,r,e){var n,a,i,u=e[0],s=e[1],c=e[2],f=Math.sqrt(u*u+s*s+c*c);return Math.abs(f)<o?null:(u*=f=1/f,s*=f,c*=f,n=Math.sin(r),i=1-(a=Math.cos(r)),t[0]=u*u*i+a,t[1]=s*u*i+c*n,t[2]=c*u*i-s*n,t[3]=0,t[4]=u*s*i-c*n,t[5]=s*s*i+a,t[6]=c*s*i+u*n,t[7]=0,t[8]=u*c*i+s*n,t[9]=s*c*i-u*n,t[10]=c*c*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function F(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function B(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=n+n,s=a+a,c=o+o,f=n*u,h=n*s,l=n*c,d=a*s,m=a*c,M=o*c,b=i*u,p=i*s,v=i*c;return t[0]=1-(d+M),t[1]=h+v,t[2]=l-p,t[3]=0,t[4]=h-v,t[5]=1-(f+M),t[6]=m+b,t[7]=0,t[8]=l+p,t[9]=m-b,t[10]=1-(f+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function E(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function L(t,r){var e=r[0],n=r[1],a=r[2],o=r[4],i=r[5],u=r[6],s=r[8],c=r[9],f=r[10];return t[0]=Math.sqrt(e*e+n*n+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+f*f),t}function I(t,r){var e=r[0]+r[5]+r[10],n=0;return e>0?(n=2*Math.sqrt(e+1),t[3]=.25*n,t[0]=(r[6]-r[9])/n,t[1]=(r[8]-r[2])/n,t[2]=(r[1]-r[4])/n):r[0]>r[5]&&r[0]>r[10]?(n=2*Math.sqrt(1+r[0]-r[5]-r[10]),t[3]=(r[6]-r[9])/n,t[0]=.25*n,t[1]=(r[1]+r[4])/n,t[2]=(r[8]+r[2])/n):r[5]>r[10]?(n=2*Math.sqrt(1+r[5]-r[0]-r[10]),t[3]=(r[8]-r[2])/n,t[0]=(r[1]+r[4])/n,t[1]=.25*n,t[2]=(r[6]+r[9])/n):(n=2*Math.sqrt(1+r[10]-r[0]-r[5]),t[3]=(r[1]-r[4])/n,t[0]=(r[8]+r[2])/n,t[1]=(r[6]+r[9])/n,t[2]=.25*n),t}function T(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3],s=a+a,c=o+o,f=i+i,h=a*s,l=a*c,d=a*f,m=o*c,M=o*f,b=i*f,p=u*s,v=u*c,g=u*f,A=n[0],y=n[1],R=n[2];return t[0]=(1-(m+b))*A,t[1]=(l+g)*A,t[2]=(d-v)*A,t[3]=0,t[4]=(l-g)*y,t[5]=(1-(h+b))*y,t[6]=(M+p)*y,t[7]=0,t[8]=(d+v)*R,t[9]=(M-p)*R,t[10]=(1-(h+m))*R,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function D(t,r,e,n,a){var o=r[0],i=r[1],u=r[2],s=r[3],c=o+o,f=i+i,h=u+u,l=o*c,d=o*f,m=o*h,M=i*f,b=i*h,p=u*h,v=s*c,g=s*f,A=s*h,y=n[0],R=n[1],S=n[2],x=a[0],w=a[1],F=a[2];return t[0]=(1-(M+p))*y,t[1]=(d+A)*y,t[2]=(m-g)*y,t[3]=0,t[4]=(d-A)*R,t[5]=(1-(l+p))*R,t[6]=(b+v)*R,t[7]=0,t[8]=(m+g)*S,t[9]=(b-v)*S,t[10]=(1-(l+M))*S,t[11]=0,t[12]=e[0]+x-(t[0]*x+t[4]*w+t[8]*F),t[13]=e[1]+w-(t[1]*x+t[5]*w+t[9]*F),t[14]=e[2]+F-(t[2]*x+t[6]*w+t[10]*F),t[15]=1,t}function V(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e+e,u=n+n,s=a+a,c=e*i,f=n*i,h=n*u,l=a*i,d=a*u,m=a*s,M=o*i,b=o*u,p=o*s;return t[0]=1-h-m,t[1]=f+p,t[2]=l-b,t[3]=0,t[4]=f-p,t[5]=1-c-m,t[6]=d+M,t[7]=0,t[8]=l+b,t[9]=d-M,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(t,r,e,n,a,o,i){var u=1/(e-r),s=1/(a-n),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+r)*u,t[9]=(a+n)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t}function U(t,r,e,n,a){var o=1/Math.tan(r/2),i=1/(n-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*i,t[15]=0,t}function q(t,r,e,n){var a=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),i=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=n/(e-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*e/(e-n),t[15]=0,t}function Y(t,r,e,n,a,o,i){var u=1/(r-e),s=1/(n-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(r+e)*u,t[13]=(a+n)*s,t[14]=(i+o)*c,t[15]=1,t}function C(t,r,e,n){var a,i,u,s,c,f,l,d,m,M,b=r[0],p=r[1],v=r[2],g=n[0],A=n[1],y=n[2],R=e[0],S=e[1],x=e[2];return Math.abs(b-R)<o&&Math.abs(p-S)<o&&Math.abs(v-x)<o?h(t):(l=b-R,d=p-S,m=v-x,a=A*(m*=M=1/Math.sqrt(l*l+d*d+m*m))-y*(d*=M),i=y*(l*=M)-g*m,u=g*d-A*l,(M=Math.sqrt(a*a+i*i+u*u))?(a*=M=1/M,i*=M,u*=M):(a=0,i=0,u=0),s=d*u-m*i,c=m*a-l*u,f=l*i-d*a,(M=Math.sqrt(s*s+c*c+f*f))?(s*=M=1/M,c*=M,f*=M):(s=0,c=0,f=0),t[0]=a,t[1]=s,t[2]=l,t[3]=0,t[4]=i,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=f,t[10]=m,t[11]=0,t[12]=-(a*b+i*p+u*v),t[13]=-(s*b+c*p+f*v),t[14]=-(l*b+d*p+m*v),t[15]=1,t)}function z(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function O(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function N(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t[9]=r[9]+e[9],t[10]=r[10]+e[10],t[11]=r[11]+e[11],t[12]=r[12]+e[12],t[13]=r[13]+e[13],t[14]=r[14]+e[14],t[15]=r[15]+e[15],t}function H(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t[9]=r[9]-e[9],t[10]=r[10]-e[10],t[11]=r[11]-e[11],t[12]=r[12]-e[12],t[13]=r[13]-e[13],t[14]=r[14]-e[14],t[15]=r[15]-e[15],t}function X(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t[9]=r[9]*e,t[10]=r[10]*e,t[11]=r[11]*e,t[12]=r[12]*e,t[13]=r[13]*e,t[14]=r[14]*e,t[15]=r[15]*e,t}function W(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t[9]=r[9]+e[9]*n,t[10]=r[10]+e[10]*n,t[11]=r[11]+e[11]*n,t[12]=r[12]+e[12]*n,t[13]=r[13]+e[13]*n,t[14]=r[14]+e[14]*n,t[15]=r[15]+e[15]*n,t}function j(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function G(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=t[8],l=t[9],d=t[10],m=t[11],M=t[12],b=t[13],p=t[14],v=t[15],g=r[0],A=r[1],y=r[2],R=r[3],S=r[4],x=r[5],w=r[6],F=r[7],_=r[8],P=r[9],B=r[10],E=r[11],L=r[12],I=r[13],T=r[14],D=r[15];return Math.abs(e-g)<=o*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(n-A)<=o*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(a-y)<=o*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(i-R)<=o*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(u-S)<=o*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(s-x)<=o*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(c-w)<=o*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-F)<=o*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(h-_)<=o*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(l-P)<=o*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(d-B)<=o*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(m-E)<=o*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(M-L)<=o*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(b-I)<=o*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(p-T)<=o*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(v-D)<=o*Math.max(1,Math.abs(v),Math.abs(D))}function Z(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}function K(t){var r=new Float32Array(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Q(t,r,e){var n=new Float32Array(3);return n[0]=t,n[1]=r,n[2]=e,n}function J(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function $(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function tt(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function rt(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function et(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function nt(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function at(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function ot(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function it(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function ut(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function st(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function ct(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function ft(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function ht(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return Math.sqrt(e*e+n*n+a*a)}function lt(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return e*e+n*n+a*a}function dt(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function mt(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function Mt(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function bt(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function pt(t,r){var e=r[0],n=r[1],a=r[2],o=e*e+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o),t}function vt(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function gt(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2];return t[0]=a*s-o*u,t[1]=o*i-n*s,t[2]=n*u-a*i,t}function At(t,r,e,n){var a=r[0],o=r[1],i=r[2];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t[2]=i+n*(e[2]-i),t}function yt(t,r,e,n,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),f=i*(3-2*o);return t[0]=r[0]*u+e[0]*s+n[0]*c+a[0]*f,t[1]=r[1]*u+e[1]*s+n[1]*c+a[1]*f,t[2]=r[2]*u+e[2]*s+n[2]*c+a[2]*f,t}function Rt(t,r,e,n,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,f=3*o*u,h=3*s*i,l=s*o;return t[0]=r[0]*c+e[0]*f+n[0]*h+a[0]*l,t[1]=r[1]*c+e[1]*f+n[1]*h+a[1]*l,t[2]=r[2]*c+e[2]*f+n[2]*h+a[2]*l,t}function St(t,r){void 0===r&&(r=1);var e=2*Math.random()*Math.PI,n=2*Math.random()-1,a=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=n*r,t}function xt(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[3]*n+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*n+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*n+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*n+e[6]*a+e[10]*o+e[14])/i,t}function wt(t,r,e){var n=r[0],a=r[1],o=r[2];return t[0]=n*e[0]+a*e[3]+o*e[6],t[1]=n*e[1]+a*e[4]+o*e[7],t[2]=n*e[2]+a*e[5]+o*e[8],t}function Ft(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2],c=e[3],f=c*n+u*o-s*a,h=c*a+s*n-i*o,l=c*o+i*a-u*n,d=-i*n-u*a-s*o;return t[0]=f*c+d*-i+h*-s-l*-u,t[1]=h*c+d*-u+l*-i-f*-s,t[2]=l*c+d*-s+f*-u-h*-i,t}function _t(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Pt(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Bt(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Et(t,r,e,n,a,o){var i,u,s=Z();for(r||(r=3),e||(e=0),u=n?Math.min(n*r+e,t.length):t.length,i=e;i<u;i+=r)s[0]=t[i],s[1]=t[i+1],s[2]=t[i+2],a(s,s,o),t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2];return t}function Lt(t,r){var e=Q(t[0],t[1],t[2]),n=Q(r[0],r[1],r[2]);pt(e,e),pt(n,n);var a=vt(e,n);return a>1?0:a<-1?Math.PI:Math.acos(a)}function It(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Dt(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],u=r[1],s=r[2];return Math.abs(e-i)<=o*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-u)<=o*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=o*Math.max(1,Math.abs(a),Math.abs(s))}var Vt=function(){function t(t,r,e){this.gl=t,this.vertSource=r,this.fragSource=e,this.attributeVariables=new Map,this.uniformVariables=new Map,this.vertShader=this.createVShader(this.vertSource),this.fragShader=this.createFShader(this.fragSource),this.shaderProgram=this.createShaderProgram(this.vertShader,this.fragShader)}return t.load=function(r,e,n){return Promise.all([t.loadFile(e),t.loadFile(n)]).then(function(e){return new t(r,e[0],e[1])})},t.loadFile=function(t){return new Promise(function(r){var e=new XMLHttpRequest;e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&r(e.responseText)},e.open("GET",t,!0),e.send(null)})},t.createProgramFromScripts=function(r,e,n){return Promise.all([t.getScript(e),t.getScript(n)]).then(function(e){return new t(r,e[0],e[1])})},t.getScript=function(t){return new Promise(function(r){r(document.querySelector(t).innerText)})},t.prototype.use=function(){return this.gl.useProgram(this.shaderProgram),this},t.prototype.createVShader=function(t){var r=this.gl,e=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(e,t),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS))throw console.error(r.getShaderInfoLog(e)),new Error("Failed to compile shader");return e},t.prototype.createFShader=function(t){var r=this.gl,e=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(e,t),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS))throw console.error(r.getShaderInfoLog(e)),new Error("Failed to compile shader");return e},t.prototype.createShaderProgram=function(t,r){var e=this.gl,n=e.createProgram();if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw console.error(e.getProgramInfoLog(n)),new Error("Failed to link program");return n},t.prototype.getAttribute=function(t){var r=this.gl,e=this.shaderProgram,n=r.getAttribLocation(e,t);return this.attributeVariables.set(t,n),n},t.prototype.getUniform=function(t){var r=this.gl,e=this.shaderProgram,n=r.getUniformLocation(e,t);return this.uniformVariables.set(t,n),n},t.prototype.getAttributes=function(t){var r=this.gl,e=this.shaderProgram,n=[];if(!Array.isArray(t))throw new Error("attributeNames is not a array.");for(var a=0,o=t.length;a<o;a++){var i=r.getAttribLocation(e,t[a]);n.push(i),this.attributeVariables.set(t[a],i)}return n},t.prototype.getUniforms=function(t){var r=this.gl,e=this.shaderProgram,n=[];if(!Array.isArray(t))throw new Error("uniformNames is not a array.");for(var a=0,o=t.length;a<o;a++){var i=r.getUniformLocation(e,t[a]);n.push(i),this.uniformVariables.set(t[a],i)}return n},t}(),kt=function(){return[Math.random(),Math.random(),Math.random(),Math.random()]},Ut=function(t,r){return Math.random()*(r-t)+t},qt=function(t,r,e){var n=[r[0]-t[0],r[1]-t[1],r[2]-t[2]],a=[e[0]-t[0],e[1]-t[1],e[2]-t[2]];return[n[1]*a[2]-n[2]*a[1],n[2]*a[0]-n[0]*a[2],n[0]*a[1]-n[1]*a[0]]},Yt=function(t){var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r>1e-6?[t[0]/r,t[1]/r,t[2]/r]:[0,0,0]},Ct=function(t,r,e,n){return new(e||(e=Promise))(function(a,o){function i(t){try{s(n.next(t))}catch(t){o(t)}}function u(t){try{s(n.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new e(function(r){r(t.value)}).then(i,u)}s((n=n.apply(t,r||[])).next())})},zt=function(t,r){var e,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(t,i)}catch(t){o=[6,t],n=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},Ot=e("./src/shader/face.vert"),Nt=e("./src/shader/face.frag"),Ht=function(){function t(t){var r=this;this.canvas=t,this.instanceCount=0,this.buffers=new Map,this.dataset={},this.config={fieldOfView:45,zNear:.01,zFar:1e3,polygon:60,cameraPos:a.fromValues(0,0,100),cameraLook:a.fromValues(0,0,0),cameraRotate:a.fromValues(45,0,0),scaling:a.fromValues(1,1,1),translating:a.fromValues(.25,.25,.25)},console.log(this),this.initGL().createModel().initShaders().then(function(t){r.getVariable().initBuffers().listenEvents().start()})}return t.init=function(r){return new t(r)},t.prototype.start=function(){return this.startPlay()},t.prototype.stop=function(){return this.stopPlay()},t.prototype.setViewport=function(){var t=this.gl;return t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),this},t.prototype.initGL=function(){try{this.gl=this.canvas.getContext("webgl2")}catch(t){console.error(t)}return this.gl||console.error("Could not initialise WebGL, sorry :-("),this.setViewport()},t.prototype.initShaders=function(){return Ct(this,void 0,void 0,function(){var t,r;return zt(this,function(e){switch(e.label){case 0:return t=this.gl,r=this,[4,Vt.load(t,Ot,Nt)];case 1:return r.shaderProgram=e.sent(),[2,this]}})})},t.prototype.getVariable=function(){this.gl;var t=this.shaderProgram;return t.getAttributes(["aVertexPosition","aVertexColor","aInstanceSize","aInstancePosition","aInstanceColor"]),t.getUniforms(["uMvpMatrix","uModelMatrix","uNormalMatrix"]),this},t.prototype.createModel=function(){for(var t=this.dataset,r=0,e=0,n=0,a=this.config.polygon||Math.floor(Ut(4,50)),o=360/a,i=(kt(),[]),u=[],s=[],c=[],f=[],h=[],l=[],d=[],m=[],M=0;M<=a;M++){var b=o*M*Math.PI/180,p=r+1*Math.cos(b),v=e+1*Math.sin(b);i.push([p,v])}for(M=0;M<i.length-1;M++){var g=[i[M].concat([n]),i[M+1].concat([n]),[r,e,n]],A=kt();d.push.apply(d,g[0].concat(g[1])),d.push(1.05*g[0][0],1.05*g[0][1],1.05*g[0][2],1.05*g[1][0],1.05*g[1][1],1.05*g[1][2]),d.push(1.08*g[0][0],1.08*g[0][1],1.08*g[0][2],1.08*g[1][0],1.08*g[1][1],1.08*g[1][2]),u.push.apply(u,g[0].concat(g[1],g[2])),c.push.apply(c,Yt(qt(g[0],g[1],g[2])).concat(Yt(qt(g[0],g[1],g[2])),Yt(qt(g[0],g[1],g[2])))),s.push.apply(s,A.concat(A,A))}for(M=-5;M<=Math.abs(-5);M+=2)for(var y=-5;y<=Math.abs(-5);y+=2)f.push(y,M,Ut(-5,5)),h.push(1,1,1),l.push.apply(l,kt()),m.push.apply(m,kt()),this.instanceCount++;return console.log(this.instanceCount),t.model_vertex_position=u,t.model_vertex_normal=c,t.model_vertex_color=s,t.instance_position=f,t.instance_size=h,t.instance_color=l,t.line_vertex_position=d,t.line_instance_color=m,this},t.prototype.initBuffers=function(){var t=this.gl,r=this.dataset,e=this.buffers,n=t.createBuffer(),a={buffer:n,itemSize:3,numItems:r.model_vertex_position.length/3};t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.model_vertex_position),t.STATIC_DRAW),e.set("modelVertexBuffer",a);var o=t.createBuffer(),i={buffer:o,itemSize:4,numItems:r.model_vertex_color/4};t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.model_vertex_color),t.STATIC_DRAW),e.set("modelColorBuffer",i);var u=t.createBuffer(),s={buffer:u,itemSize:3,numItems:r.instance_position.length/3};t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.instance_position),t.STATIC_DRAW),e.set("instancePositionBuffer",s);var c=t.createBuffer(),f={buffer:c,itemSize:3,numItems:r.instance_size.length/3};t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.instance_size),t.STATIC_DRAW),e.set("instanceSizeBuffer",f);var h=t.createBuffer(),l={buffer:h,itemSize:4,numItems:r.instance_color.length/4};t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.instance_color),t.STATIC_DRAW),e.set("instanceColorBuffer",l);var d=t.createBuffer(),m={buffer:d,itemSize:3,numItems:r.line_vertex_position.length/3};t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.line_vertex_position),t.STATIC_DRAW),e.set("lineVertexBuffer",m);var M=t.createBuffer(),b={buffer:M,itemSize:4,numItems:r.line_instance_color.length/4};return t.bindBuffer(t.ARRAY_BUFFER,M),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.line_instance_color),t.STATIC_DRAW),e.set("lineInstanceColorBuffer",b),this},t.prototype.drawScene=function(t){void 0===t&&(t=!1);var r=this.gl,e=this.config,a=this.shaderProgram,o=this.buffers,i=e.fieldOfView/Math.PI/180,u=r.drawingBufferWidth/r.drawingBufferHeight,s=e.zNear,c=e.zFar,f=n.create(),h=n.create(),l=n.create(),d=n.create(),m=n.create(),M=n.create();n.perspective(l,i,u,s,c),n.lookAt(h,e.cameraPos,e.cameraLook,[0,1,0]),n.rotate(h,h,e.cameraRotate[0]*Math.PI/180,[1,0,0]),n.rotate(h,h,e.cameraRotate[1]*Math.PI/180,[0,1,0]),n.rotate(h,h,e.cameraRotate[2]*Math.PI/180,[0,0,1]),n.scale(f,f,e.scaling),n.multiply(M,h,f),n.multiply(d,l,M),n.invert(m,M),n.transpose(m,m),r.disable(r.BLEND),r.enable(this.gl.DEPTH_TEST),r.clearColor(.25,.25,.25,1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),a.use(),r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.DST_COLOR,r.DST_ALPHA),r.uniformMatrix4fv(a.uniformVariables.get("uMvpMatrix"),!1,d),r.uniformMatrix4fv(a.uniformVariables.get("uModelMatrix"),!1,f),r.uniformMatrix4fv(a.uniformVariables.get("uNormalMatrix"),!1,m);var b=o.get("modelVertexBuffer"),p=a.attributeVariables.get("aVertexPosition"),v=o.get("instancePositionBuffer"),g=a.attributeVariables.get("aInstancePosition"),A=o.get("instanceSizeBuffer"),y=a.attributeVariables.get("aInstanceSize"),R=o.get("instanceColorBuffer"),S=a.attributeVariables.get("aInstanceColor"),x=o.get("lineVertexBuffer"),w=o.get("lineInstanceColorBuffer");return r.bindBuffer(r.ARRAY_BUFFER,x.buffer),r.enableVertexAttribArray(p),r.vertexAttribPointer(p,x.itemSize,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,v.buffer),r.enableVertexAttribArray(g),r.vertexAttribPointer(g,v.itemSize,r.FLOAT,!1,0,0),r.vertexAttribDivisor(g,1),r.bindBuffer(r.ARRAY_BUFFER,A.buffer),r.enableVertexAttribArray(y),r.vertexAttribPointer(y,A.itemSize,r.FLOAT,!1,0,0),r.vertexAttribDivisor(y,1),r.bindBuffer(r.ARRAY_BUFFER,w.buffer),r.enableVertexAttribArray(S),r.vertexAttribPointer(S,w.itemSize,r.FLOAT,!1,0,0),r.vertexAttribDivisor(S,1),r.drawArraysInstanced(r.LINES,0,x.numItems,this.instanceCount||1),r.bindBuffer(r.ARRAY_BUFFER,b.buffer),r.enableVertexAttribArray(p),r.vertexAttribPointer(p,b.itemSize,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,v.buffer),r.enableVertexAttribArray(g),r.vertexAttribPointer(g,v.itemSize,r.FLOAT,!1,0,0),r.vertexAttribDivisor(g,1),r.bindBuffer(r.ARRAY_BUFFER,A.buffer),r.enableVertexAttribArray(y),r.vertexAttribPointer(y,A.itemSize,r.FLOAT,!1,0,0),r.vertexAttribDivisor(y,1),r.bindBuffer(r.ARRAY_BUFFER,R.buffer),r.enableVertexAttribArray(S),r.vertexAttribPointer(S,R.itemSize,r.FLOAT,!1,0,0),r.vertexAttribDivisor(S,1),r.drawArraysInstanced(r.TRIANGLES,0,b.numItems,this.instanceCount||1),this},t.prototype.clickItemHandler=function(){return function(t){console.log(t)}},t.prototype.listenEvents=function(){var t=this.canvas,r=this.config,e=this,n={dragging:!1,lastMouseX:-1,lastMouseY:-1,keyStep:.1};function a(t){var r=t.clientX,e=t.clientY,a=t.target.getBoundingClientRect();a.left<=r&&r<a.right&&a.top<=e&&e<a.bottom&&(n.lastMouseX=r,n.lastMouseY=e,n.dragging=!0),t.preventDefault&&t.preventDefault()}function o(e){var a=e.clientX,o=e.clientY;if(n.dragging){var i=100/t.height,u=i*(a-n.lastMouseX),s=i*(o-n.lastMouseY);e.ctrlKey?(r.cameraPos[0]-=u/100,r.cameraPos[1]+=s/100,r.cameraLook[0]-=u/100,r.cameraLook[1]+=s/100):(r.cameraRotate[0]+=s,r.cameraRotate[1]+=u)}n.lastMouseX=a,n.lastMouseY=o,e.preventDefault&&e.preventDefault()}function i(t){n.dragging=!1,t.preventDefault&&t.preventDefault()}return t.addEventListener("mousedown",this.clickItemHandler(),!1),document.addEventListener("contextmenu",function(t){return t.preventDefault()}),t.addEventListener("mousewheel",function(e){var n=e.deltaY/t.height*10;r.cameraPos[2]+=n,r.cameraLook[2]+=n},!1),t.addEventListener("mousedown",a,!1),document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",i,!1),t.addEventListener("touchstart",a,!1),document.addEventListener("touchmove",o,!1),document.addEventListener("touchend",i,!1),document.addEventListener("keydown",function(t){switch(t.keyCode){case 87:case 38:r.cameraPos[2]-=n.keyStep,r.cameraLook[2]-=n.keyStep;break;case 83:case 40:r.cameraPos[2]+=n.keyStep,r.cameraLook[2]+=n.keyStep;break;case 65:case 37:r.cameraPos[0]-=n.keyStep,r.cameraLook[0]-=n.keyStep;break;case 68:case 39:r.cameraPos[0]+=n.keyStep,r.cameraLook[0]+=n.keyStep;break;case 32:console.log("restoration"),e.restoration()}},!1),t.addEventListener("webglcontextlost",function(t){console.log("contextLost"),t.preventDefault(),e.stopPlay()},!1),t.addEventListener("webglcontextrestored",function(t){console.log("contextRestored"),t.preventDefault()},!1),this},t.prototype.restoration=function(){var t=this.config;return t.cameraPos=[0,0,100],t.cameraLook=[0,0,0],t.cameraRotate=[45,0,0],this},t.prototype.update=function(t){var r=this.config;r.cameraRotate[0]+=.25;for(var e=0,n=r.scaling.length;e<n;e++)r.scaling[e]>=.5&&r.scaling[e]<=1?r.scaling[e]+=.0025:r.scaling[e]=.5;return this},t.prototype.startPlay=function(){var t=this,r=0,e=function(n){var a=n-r;r=n,a*=.001,t.update(a),t.drawScene(),t.player=requestAnimationFrame(e)};return this.player&&this.stopPlay(),this.player=requestAnimationFrame(e),this},t.prototype.stopPlay=function(){return this.player&&cancelAnimationFrame(this.player),this},t}(),Xt=function(){function t(){}return t.init=function(){return t.instance?t.instance:t.instance=new t},t.prototype.run=function(){var t=this;this.canvas=document.createElement("canvas");var r=function(){t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight,t.demo&&t.demo.setViewport()};r(),document.body.appendChild(this.canvas),window.addEventListener("resize",r,!1),this.demo=Ht.init(this.canvas),window.demo=this.demo},t}();e("./src/style/main.scss");Xt.init().run()},"./src/shader/face.frag":function(t,r,e){t.exports=e.p+"shader/face.157d1cf648c8fe6e4f00a7275f6c97c4.frag"},"./src/shader/face.vert":function(t,r,e){t.exports=e.p+"shader/face.8d503fddadc6602c1d16004d62681851.vert"},"./src/style/main.scss":function(t,r){}});